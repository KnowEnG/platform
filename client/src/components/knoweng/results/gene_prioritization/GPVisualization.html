<div class="gp-visualization-container">
    <!-- Show a spinner until "result" is populated -->
    <div *ngIf="!result" class="loading white-text">
        <i class="fa fa-fw fa-spinner fa-pulse"></i>
        Loading...
    </div>
    
    <gp-control-panel *ngIf="result"
        [job]="job"
        [gradientMaxColor]="gradientMaxColor"
        [gradientMinColor]="gradientMinColor"
        [gradientMaxValue]="gradientMaxValue"
        [gradientMinValue]="gradientMinValue"
        [result]="result"
        [currentNumTopGenes]="currentNumTopGenes"
        [selectedResponses]="selectedResponses"
        (updatedNumTopGenes)="updateNumCurrentTopGenes($event)"
        (updatedSelectedResponses)="updateSelectedResponses($event)">
    </gp-control-panel>
    <gp-data-area *ngIf="result"
        [job]="job"
        [gradientMaxColor]="gradientMaxColor"
        [gradientMinColor]="gradientMinColor"
        [gradientMaxValue]="gradientMaxValue"
        [gradientMinValue]="gradientMinValue"
        [currentNumTopGenes]="currentNumTopGenes"
        [selectedResponses]="selectedResponses"
        [scores]="result?.scores"
        [geneIdToNameMap]="result?.geneIdToNameMap">
    </gp-data-area>
</div>
